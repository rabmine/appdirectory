Calendar.setup=function(g){function f(h,i){if(typeof g[h]=="undefined"){g[h]=i}}f("inputField",null);f("displayArea",null);f("button",null);f("eventName","click");f("ifFormat","y/mm/dd");f("daFormat","y/mm/dd");f("singleClick",true);f("disableFunc",null);f("mondayFirst",false);f("align","Bl");f("range",[1900,2999]);f("weekNumbers",true);f("flat",null);f("flatCallback",null);var c=["inputField","displayArea","button"];for(var b in c){if(typeof g[c[b]]=="string"){g[c[b]]=document.getElementById(g[c[b]])}}if(!(g.flat||g.inputField||g.displayArea||g.button)){alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code");return false}function a(h){if(h.params.flat){if(typeof h.params.flatCallback=="function"){h.params.flatCallback(h)}else{alert("No flatCallback given -- doing nothing.")}return false}if(h.params.inputField){h.params.inputField.value=h.date.print(h.params.ifFormat)}if(h.params.displayArea){h.params.displayArea.innerHTML=h.date.print(h.params.daFormat)}if(h.params.singleClick&&h.dateClicked){h.callCloseHandler()}}if(g.flat!=null){g.flat=document.getElementById(g.flat);if(!g.flat){alert("Calendar.setup:\n  Flat specified but can't find parent.");return false}var e=new Calendar(g.mondayFirst,null,a);e.params=g;e.weekNumbers=g.weekNumbers;e.setRange(g.range[0],g.range[1]);e.setDisabledHandler(g.disableFunc);e.create(g.flat);e.show();return false}var d=g.button||g.displayArea||g.inputField;d["on"+g.eventName]=function(){var h=g.inputField||g.displayArea;var i=g.inputField?g.ifFormat:g.daFormat;var j=false;if(!window.calendar){window.calendar=new Calendar(g.mondayFirst,null,a,function(k){k.hide()});window.calendar.weekNumbers=g.weekNumbers;j=true}else{window.calendar.hide()}window.calendar.setRange(g.range[0],g.range[1]);window.calendar.params=g;window.calendar.setDisabledHandler(g.disableFunc);window.calendar.setDateFormat(i);if(j){window.calendar.create()}window.calendar.parseDate(h.value||h.innerHTML);window.calendar.refresh();window.calendar.showAtElement(g.displayArea||g.inputField,g.align);return false}};